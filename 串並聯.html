<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™Ÿè‡ªç„¶è¼”åŠ©ç³»çµ±ã€€ä¸²è¯èˆ‡ä¸¦è¯</title>
    <style>
        :root {
            /* æ²¿ç”¨åŸæœ¬é›»è·¯çš„è®Šæ•¸ */
            --wire-color: #333;
            --panel-color: #ffffff;
            --bulb-off: #bdc3c7;
            --bulb-dim-color: #cca300;
            --bulb-norm-color: #f1c40f;
            --bulb-bright-color: #fff700;
            
            /* UI ç”¨è®Šæ•¸ */
            --bg-color: #f0f4f8; 
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-image: url('page.jpg'); 
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-color: #f0f2f5;
            
            display: flex; flex-direction: column; align-items: center;
            /* ä¿®æ”¹ï¼šæ¸›å°‘ä¸Šä¸‹é‚Šè·ï¼Œç›¡é‡è®“å…§å®¹å¡é€²ä¸€é  */
            margin: 0; padding: 5px; 
            height: 100vh;       /* èˆŠæ‰‹æ©Ÿç›¸å®¹ */
            height: 100dvh;      /* é—œéµï¼šæ‰£é™¤å·¥å…·åˆ—å¾Œçš„å¯¦éš›é«˜åº¦ */
            overflow: hidden;    /* ç¦æ­¢ç”¢ç”Ÿä»»ä½•æ²è»¸ */
            touch-action: manipulation;
        }

        /* --- æ¨™é¡Œå€ (æ‰‹æ©Ÿç‰ˆç·Šæ¹ŠåŒ–) --- */
        .header-container {
            flex-shrink: 0; /* ç¦æ­¢è¢«å£“ç¸® */
            width: 97%;     /* ç¨å¾®ç•™é‚Š */
			box-sizing: border-box; /* ç¢ºä¿ padding ä¸æœƒè®“å®ƒè®Šæ›´å¯¬ */
            max-width: 800px;
            
            /* è®“æ¨™é¡Œåœ¨å·¦ï¼ŒæŒ‰éˆ•åœ¨å³ */
            display: flex;
            justify-content: space-between; 
            align-items: center;
            
            /* è¦–è¦ºç¾åŒ– */
            padding: 8px 15px;
            margin-top: 5px;
			margin-bottom: 8px;
            background: rgba(255, 255, 255, 0.9); /* 90% ä¸é€æ˜åº¦ */
            backdrop-filter: blur(5px);
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15); /* ç«‹é«”é™°å½± */
            z-index: 1000;
        }
		
        .title-logo {
            height: 36px; /* é™åˆ¶é«˜åº¦ï¼Œé¿å…æ’é–‹ */
            width: auto;
            border-radius: 4px;
        }
        .header-container h1 {
            margin: 0;
            font-size: 1.1rem;
            color: #333;
            line-height: 1.3;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px; /* Logo èˆ‡æ–‡å­—é–“è· */
        }
		
		/* =========================================
           3. å³ä¸Šè§’æŒ‰éˆ•ç¾¤ (æ–°åŠŸèƒ½)
           ========================================= */
        .nav-buttons {
            display: flex;
            gap: 8px; /* æŒ‰éˆ•ä¹‹é–“çš„é–“è· */
        }
		
		/* ç²¾ç·»åŒ–çš„ LINE æŒ‰éˆ• (è† å›Šç‹€) */
        .header-btn {
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 6px 12px;
            background: #06c755; /* LINE çš„å®˜æ–¹ç¶ è‰² */
            color: white;
            font-size: 0.9rem;
            font-weight: bold;
            border-radius: 20px; /* åœ“è§’è† å›Š */
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            transition: transform 0.1s, background 0.2s;
            white-space: nowrap; /* ç¦æ­¢æ–‡å­—æ›è¡Œ */
        }
		
		.header-btn:active {
            transform: scale(0.95);
        }

        .header-btn span {
            margin-right: 4px; /* åœ–ç¤ºèˆ‡æ–‡å­—è·é›¢ */
        }

        /* --- æ–°å¢ï¼šå¤–éƒ¨é€£çµæŒ‰éˆ• (ç§»æ¤è‡ª index.html) --- */
        .external-link-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px; 
            text-decoration: none;
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: #fff;
            
            /* æ¨£å¼ä¿æŒä¸€è‡´ */
            padding: 6px 18px; 
            font-size: 0.9rem; 
            
            border-radius: 50px;
            font-weight: bold;
            /* å¾®èª¿ï¼šé‡å°æ­¤æª”æ¡ˆè¼ƒç·Šæ¹Šçš„ä½ˆå±€ï¼Œå°‡åŸ margin-bottom: 20px å¾®èª¿ç‚º 10px */
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(52, 152, 219, 0.4);
            transition: all 0.2s ease;
            cursor: pointer;
            border: 2px solid rgba(255,255,255,0.2);
        }
        .external-link-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 12px rgba(52, 152, 219, 0.6);
            background: linear-gradient(135deg, #2980b9 0%, #2c3e50 100%);
        }
        .external-link-btn:active {
            transform: scale(0.98);
        }
		
		/* --- æ•™å­¸å¼•å°ä»»å‹™æ¢æ¨£å¼ --- */
		.instruction-bar {
		    /* å®šä½èˆ‡ä½ˆå±€ */
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 8px; /* åœ–ç¤ºèˆ‡æ–‡å­—é–“è· */
			
			/* å°ºå¯¸é™åˆ¶ï¼Œèˆ‡æ¨™é¡Œå€ä¿æŒè¦–è¦ºå”èª¿ */
			max-width: 90%;
			width: fit-content; /* å…§å®¹å¤šå¯¬å°±å¤šå¯¬ï¼Œä¸è¦è‡ªå‹•æ’æ»¿æ•´è¡Œ */
			margin: -5px auto 15px auto; /* è² é‚Šè·å°‡å…¶å‘ä¸Šæ‹‰è¿‘æ¨™é¡Œï¼Œä¸‹æ–¹ç•™å‡ºå‘¼å¸ç©ºé–“ */
			
			/* å¤–è§€è¨­è¨ˆ - è¼•é‡åŒ– */
			padding: 6px 20px;
			background-color: rgba(255, 255, 255, 0.85); /* æ¯”æ¨™é¡Œå€æ›´é€šé€ */
			border-radius: 20px; /* åœ“æ½¤çš„è† å›Šç‹€ */
			box-shadow: 0 2px 8px rgba(0,0,0,0.05); /* æ¥µè¼•å¾®çš„é™°å½± */
			backdrop-filter: blur(4px); /* æ¯›ç»ç’ƒæ•ˆæœï¼Œå¢åŠ è³ªæ„Ÿ */
			
			/* æ–‡å­—è¨­å®š */
			color: #555; /* æ·±ç°è‰²ï¼Œä¸æ¶é»‘è‰²æ¨™é¡Œçš„æˆ² */
			font-size: 0.9rem;
			font-weight: 500;
			line-height: 1.4;
			text-align: center;
			pointer-events: none; /* è®“æ»‘é¼ å¯ä»¥ç›´æ¥ç©¿é€ï¼Œä¸æœƒé˜»æ“‹æ“ä½œ */
		}
		
		.instruction-bar .icon {
    		font-size: 1rem; /* åœ–ç¤ºç¨å¾®å¤§ä¸€é» */
		}	

        /* --- æ¨¡æ“¬å®¹å™¨ --- */
        .simulation-container {
            position: relative;
            width: 500px; height: 450px;
            background: var(--panel-color); border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            display: flex; flex-direction: column;
            align-items: center; justify-content: flex-start;
            padding-top: 30px; overflow: hidden; transition: all 0.3s ease;
        }

        /* é›»è·¯å ´æ™¯ */
        .circuit-scene {
            position: relative; width: 100%; height: 320px; display: none;
        }
        .circuit-scene.active { display: block; }

        /* å…ƒä»¶ï¼šå°ç·š */
        .wire {
            position: absolute; background-image: linear-gradient(0deg, #2c3e50, #5d6d7e 40%, #85929e 60%, #2c3e50);
            border-radius: 4px; z-index: 1; box-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        .wire-h { height: 6px; } .wire-v { width: 6px; }

        /* å…ƒä»¶ï¼šç‡ˆæ³¡ */
        .bulb-wrapper {
            position: absolute; display: flex; flex-direction: column; align-items: center;
            z-index: 10; cursor: pointer; transition: transform 0.1s;
        }
        .bulb-wrapper:active { transform: scale(0.95); }

        .bulb-glass {
            width: 40px; height: 40px; border-radius: 50%; background-color: var(--bulb-off);
            border: 2px solid #95a5a6; box-shadow: inset -2px -2px 5px rgba(0,0,0,0.2);
            position: relative; transition: all 0.3s ease;
        }
        .bulb-base {
            width: 20px; height: 15px; background: linear-gradient(90deg, #7f8c8d, #bdc3c7, #7f8c8d);
            border: 1px solid #555; margin-top: -2px; border-radius: 0 0 5px 5px;
            background-image: repeating-linear-gradient(0deg, transparent, transparent 3px, rgba(0,0,0,0.2) 3px, rgba(0,0,0,0.2) 4px);
        }
        .bulb-status {
            font-size: 10px; color: #e74c3c; font-weight: bold; margin-top: 2px; opacity: 0; position: absolute; top: -15px; background: white; padding: 1px 3px; border-radius: 3px;
        }

        /* å…‰æšˆäº®åº¦ç³»çµ± */
        .lit-dim .bulb-glass {
            background-color: var(--bulb-dim-color); border-color: #b7950b;
            box-shadow: 0 0 5px var(--bulb-dim-color), inset -2px -2px 5px rgba(0,0,0,0.1);
        }
        .lit-normal .bulb-glass {
            background-color: var(--bulb-norm-color); border-color: #f39c12;
            box-shadow: 0 0 30px var(--bulb-norm-color), inset -2px -2px 5px rgba(0,0,0,0.1);
        }
        .lit-bright .bulb-glass {
            background-color: var(--bulb-bright-color); border-color: #fff;
            box-shadow: 0 0 40px var(--bulb-bright-color), 0 0 70px rgba(255, 255, 224, 0.8), inset 0 0 10px #fff;
        }
        
        .broken .bulb-glass { background-color: #333; border-color: #222; box-shadow: none; }
        .broken .bulb-status { opacity: 1; }

        /* å…ƒä»¶ï¼šé›»æ±  */
        .battery-group {
            position: absolute; display: flex; align-items: center; z-index: 5;
            cursor: pointer; transition: transform 0.1s;
        }
        .battery-group:active { transform: scale(0.95); }
        
        .battery-body {
            width: 60px;
            height: 36px; background: linear-gradient(to bottom, #34495e 0%, #5d6d7e 50%, #2c3e50 100%);
            border: 2px solid #ecf0f1; border-radius: 4px; box-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            display: flex; justify-content: space-between; align-items: center; padding: 0 5px; position: relative;
            transition: all 0.3s;
        }
        .battery-cap {
            width: 8px; height: 18px; background: linear-gradient(to bottom, #bdc3c7, #ecf0f1, #bdc3c7);
            border: 1px solid #95a5a6; border-right: none; border-radius: 3px 0 0 3px;
            position: absolute; left: -8px; top: 50%; transform: translateY(-50%);
            transition: all 0.3s;
        }
        .bat-sign { font-weight: 900; font-size: 18px; line-height: 1; }
        .sign-plus { color: #ff5252; text-shadow: 0 0 4px rgba(255, 82, 82, 0.8); }
        .sign-minus { color: #448aff; text-shadow: 0 0 4px rgba(68, 138, 255, 0.8); }

        .battery-dead .battery-body { background: #7f8c8d; border-color: #95a5a6; }
        .battery-dead .battery-cap { background: #95a5a6; }
        .battery-dead .sign-plus, .battery-dead .sign-minus { color: #bdc3c7; text-shadow: none; }
        .battery-status {
            position: absolute; top: -20px; left: 50%; transform: translateX(-50%);
            font-size: 10px; color: #555; background: white; padding: 1px 4px; border-radius: 3px;
            opacity: 0; pointer-events: none; font-weight: bold;
        }
        .battery-dead .battery-status { opacity: 1; }

        /* æ­£è² æ¥µæ¨™è¨˜ */
        .polarity { position: absolute; font-size: 14px; font-weight: bold; color: #7f8c8d; pointer-events: none; z-index: 15; }
        .p-pos { color: #e74c3c; } .p-neg { color: #3498db; }

        /* èªªæ˜é¢æ¿ (å„ªåŒ–æ–‡å­—æ’ç‰ˆ) */
        .info-panel {
            position: absolute;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            background: #ecf0f1;
            width: 90%;
            padding: 12px 15px; /* å¢åŠ å…§è·ï¼Œè®“æ–‡å­—ä¸æ“æ“  */
            border-radius: 10px;
            text-align: center;
            border-left: 5px solid #3498db;
            min-height: 60px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            z-index: 20;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05); /* å¢åŠ è¼•å¾®é™°å½±å¢åŠ å±¤æ¬¡ */
        }
        .info-title { font-weight: bold; color: #2980b9; margin-bottom: 5px; display: block;}
        .info-text { 
            font-size: 0.95rem; 
            line-height: 1.5; /* å¢åŠ è¡Œé«˜ï¼Œæå‡é–±è®€èˆ’é©åº¦ */
            color: #555; 
        }

        /* æ§åˆ¶å€ */
        .controls { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; width: 500px; margin-top: 10px; margin-bottom: 30px;}
        .btn { padding: 12px; border: none; border-radius: 8px; font-size: 1rem; cursor: pointer; color: white; transition: all 0.2s; background: #95a5a6; font-family: inherit; }
        .btn:hover { filter: brightness(1.1); }
        .btn.active { background: #3498db; box-shadow: 0 2px 5px rgba(0,0,0,0.2); transform: translateY(1px); }
        
		/* RWD: æ‰‹æ©Ÿç›´å¼æ™‚ï¼Œæ¨™é¡Œéé•·è‡ªå‹•æ›è¡Œ */
        .mobile-break { display: none; }
        
        @media (max-width: 600px) {
            .mobile-break { display: block; height: 0; }
            .header-container h1 { font-size: 1rem; }
            .header-btn { padding: 5px 10px; font-size: 0.85rem; }
            .header-btn span { display: none; } /* æ‰‹æ©Ÿç‰ˆå¤ªçª„æ™‚ï¼Œéš±è—æ‰‹æŒ‡åœ–ç¤º */
			.instruction-bar {
    			font-size: 0.8rem; /* æ‰‹æ©Ÿå­—é«”ç¸®å° */
				padding: 5px 15px;
				width: 90%; /* æ‰‹æ©Ÿä¸Šå¯¬åº¦ç¨å¾®æ”¾å¯¬ */
				margin-top: 5px; /* æ‰‹æ©Ÿç‰ˆä¸ä½¿ç”¨è² é‚Šè·ï¼Œé¿å…å¤ªæ“æ“  */
				margin-bottom: 10px;
				flex-direction: row; /* ä¿æŒæ°´å¹³æ’åˆ— */
				flex-wrap: nowrap; /* ç›¡é‡ä¸æ›è¡Œï¼Œè‹¥å­—å¤ªå¤šæœƒè‡ªå‹•ç¸®å° */
				}
        }
            
            /* 2. é›»è·¯åœ–è‡ªå‹•ç¬¦åˆä¿®æ­£ (é—œéµæŠ€è¡“) */
            .simulation-container { 
                width: 95%; /* å®¹å™¨ä½”æ»¿æ‰‹æ©Ÿå¯¬åº¦ */
                height: 380px; /* é«˜åº¦å¾®èª¿ */
            } 
            
            .circuit-scene { 
                /* â˜… å¼·åˆ¶é–å®šå¯¬åº¦ç‚ºé›»è…¦ç‰ˆå°ºå¯¸ï¼Œç¢ºä¿çµ•å°å®šä½ä¸è·‘ç‰ˆ */
                width: 500px; 
                
                /* â˜… çµ•å°ç½®ä¸­å¤§æ³• */
                position: absolute;
                left: 50%;
                margin-left: -250px; /* å‘å·¦å›æ‹‰ä¸€åŠå¯¬åº¦ */
                
                /* â˜… ç­‰æ¯”ä¾‹ç¸®å°ï¼Œè®“ 500px çš„å…§å®¹å¡é€²æ‰‹æ©Ÿè¢å¹• */
                transform: scale(0.68); 
                transform-origin: top center; 
                top: 20px; /* ç¨å¾®å¾€ä¸‹æ¨ä¸€é» */
            } 

            /* 3. èªªæ˜æ–‡å­—å„ªåŒ–ï¼šå¯¬åº¦èª¿æ•´ */
            .info-panel { 
                width: 85%; /* å·¦å³ç•™ç™½å¤šä¸€é» */
                bottom: 10px;
                padding: 10px 15px;
            }
            .info-text { font-size: 0.9rem; } /* æ‰‹æ©Ÿå­—é«”å¾®èª¿ */
            
            .controls { width: 95%; }
        }

    </style>
</head>
<body>

	<div class="header-container">
        <h1>
            <img src="logo.jpg" alt="Logo" class="title-logo" onerror="this.style.display='none'">
            <div>
                æ™Ÿè‡ªç„¶è¼”åŠ©ç³»çµ±ã€€<span class="mobile-break"></span>ä¸²è¯èˆ‡ä¸¦è¯
            </div>
        </h1>

        <div class="nav-buttons">
            <a href="https://line.me/ti/g2/TTCqPpZP6lQqX1z_AUDPNm4977Dvylew3O7oBg" target="_blank" class="header-btn" title="åŠ å…¥å®˜æ–¹LINE">
                <span>ğŸ‘‰</span>åŠ  LINE æå•
            </a>
            
            </div>
    </div>

    <div class="instruction-bar">
	    <span class="icon">ğŸ’¡</span>
		<span>é»æ“Šç‡ˆæ³¡æˆ–é›»æ± ï¼Œè§€å¯Ÿé›»è·¯è®ŠåŒ–</span>
	</div>

    <div class="simulation-container">
        
        <div class="circuit-scene" id="scene-bulb-series">
            <div class="wire wire-h" style="width: 240px; top: 60px; left: 130px;"></div>
            <div class="wire wire-h" style="width: 240px; bottom: 80px; left: 130px;"></div>
            <div class="wire wire-v" style="height: 180px; top: 60px; left: 130px;"></div>
            <div class="wire wire-v" style="height: 180px; top: 60px; right: 130px;"></div>
            
            <div class="battery-group" style="bottom: 65px; left: 220px; cursor: default;">
                <div class="battery-cap"></div>
                <div class="battery-body"><span class="bat-sign sign-plus">+</span><span class="bat-sign sign-minus">-</span></div>
            </div>

            <div class="bulb-wrapper" id="b1-s" style="top: 40px; left: 170px;" onclick="toggleBulb('b1-s')">
                <div class="bulb-glass"></div><div class="bulb-base"></div><div class="bulb-status">å£æ‰</div>
            </div>
            <div class="bulb-wrapper" id="b2-s" style="top: 40px; left: 290px;" onclick="toggleBulb('b2-s')">
                <div class="bulb-glass"></div><div class="bulb-base"></div><div class="bulb-status">å£æ‰</div>
            </div>

            <div class="polarity p-pos" style="top: 65px; left: 165px;">+</div>
            <div class="polarity p-neg" style="top: 65px; left: 215px;">-</div>
            <div class="polarity p-pos" style="top: 65px; left: 285px;">+</div>
            <div class="polarity p-neg" style="top: 65px; left: 335px;">-</div>
        </div>

        <div class="circuit-scene" id="scene-bulb-parallel">
            <div class="wire wire-h" style="width: 240px; top: 40px; left: 130px;"></div>
            <div class="wire wire-h" style="width: 240px; top: 130px; left: 130px;"></div>
            <div class="wire wire-h" style="width: 240px; bottom: 80px; left: 130px;"></div>
            <div class="wire wire-v" style="height: 200px; top: 40px; left: 130px;"></div>
            <div class="wire wire-v" style="height: 200px; top: 40px; right: 130px;"></div>

            <div class="battery-group" style="bottom: 65px; left: 220px; cursor: default;">
                <div class="battery-cap"></div>
                <div class="battery-body"><span class="bat-sign sign-plus">+</span><span class="bat-sign sign-minus">-</span></div>
            </div>

            <div class="bulb-wrapper" id="b1-p" style="top: 20px; left: 230px;" onclick="toggleBulb('b1-p')">
                <div class="bulb-glass"></div><div class="bulb-base"></div><div class="bulb-status">å£æ‰</div>
            </div>
            <div class="bulb-wrapper" id="b2-p" style="top: 110px; left: 230px;" onclick="toggleBulb('b2-p')">
                <div class="bulb-glass"></div><div class="bulb-base"></div><div class="bulb-status">å£æ‰</div>
            </div>

            <div class="polarity p-pos" style="top: 45px; left: 225px;">+</div>
            <div class="polarity p-neg" style="top: 45px; left: 275px;">-</div>
            <div class="polarity p-pos" style="top: 135px; left: 225px;">+</div>
            <div class="polarity p-neg" style="top: 135px; left: 275px;">-</div>
        </div>

        <div class="circuit-scene" id="scene-bat-series">
             <div class="wire wire-h" style="width: 240px; top: 60px; left: 130px;"></div>
             <div class="wire wire-h" style="width: 90px; bottom: 80px; left: 130px;"></div>
             <div class="wire wire-h" style="width: 90px; bottom: 80px; right: 130px;"></div>
             <div class="wire wire-v" style="height: 180px; top: 60px; left: 130px;"></div>
             <div class="wire wire-v" style="height: 180px; top: 60px; right: 130px;"></div>

             <div class="battery-group" id="bat1-s" style="bottom: 65px; left: 175px;" onclick="toggleBattery('bat1-s')">
                <div class="battery-status">æ²’é›»</div>
                <div class="battery-cap"></div><div class="battery-body"><span class="bat-sign sign-plus">+</span><span class="bat-sign sign-minus">-</span></div>
             </div>
             <div class="wire wire-h" style="width: 50px; bottom: 80px; left: 225px;"></div>
             <div class="battery-group" id="bat2-s" style="bottom: 65px; left: 265px;" onclick="toggleBattery('bat2-s')">
                <div class="battery-status">æ²’é›»</div>
                <div class="battery-cap"></div><div class="battery-body"><span class="bat-sign sign-plus">+</span><span class="bat-sign sign-minus">-</span></div>
             </div>

             <div class="bulb-wrapper" id="b1-bs" style="top: 40px; left: 230px;">
                <div class="bulb-glass"></div><div class="bulb-base"></div>
             </div>
            <div class="polarity p-pos" style="top: 65px; left: 225px;">+</div>
            <div class="polarity p-neg" style="top: 65px; left: 275px;">-</div>
        </div>

        <div class="circuit-scene" id="scene-bat-parallel">
            <div class="wire wire-h" style="width: 240px; top: 40px; left: 130px;"></div>
            <div class="wire wire-v" style="height: 220px; top: 40px; left: 130px;"></div>
            <div class="wire wire-v" style="height: 220px; top: 40px; right: 130px;"></div>
            <div class="wire wire-h" style="width: 240px; bottom: 60px; left: 130px;"></div>
            <div class="wire wire-h" style="width: 240px; bottom: 120px; left: 130px;"></div>

            <div class="battery-group" id="bat1-p" style="bottom: 105px; left: 220px;" onclick="toggleBattery('bat1-p')">
                <div class="battery-status">æ²’é›»</div>
                <div class="battery-cap"></div><div class="battery-body"><span class="bat-sign sign-plus">+</span><span class="bat-sign sign-minus">-</span></div>
            </div>
            <div class="battery-group" id="bat2-p" style="bottom: 45px; left: 220px;" onclick="toggleBattery('bat2-p')">
                <div class="battery-status">æ²’é›»</div>
                <div class="battery-cap"></div><div class="battery-body"><span class="bat-sign sign-plus">+</span><span class="bat-sign sign-minus">-</span></div>
            </div>

            <div class="bulb-wrapper" id="b1-bp" style="top: 20px; left: 230px;">
                <div class="bulb-glass"></div><div class="bulb-base"></div>
            </div>
            <div class="polarity p-pos" style="top: 45px; left: 225px;">+</div>
            <div class="polarity p-neg" style="top: 45px; left: 275px;">-</div>
        </div>

        <div class="circuit-scene" id="scene-mixed-1">
            <div class="wire wire-v" style="height: 180px; top: 60px; left: 130px;"></div>
			<div class="wire wire-h" style="width: 240px; top: 60px; left: 130px;"></div>
			<div class="wire wire-h" style="width: 240px; bottom: 80px; left: 130px;"></div>
			<div class="wire wire-v" style="height: 180px; top: 60px; left: 250px;"></div>
            <div class="wire wire-v" style="height: 180px; top: 60px; right: 130px;"></div>

            <div class="battery-group" id="bat-m1" style="bottom: 150px; left: 96px; transform: rotate(90deg);" onclick="toggleBattery('bat-m1')">
                <div class="battery-status" style="transform: rotate(-90deg); top: -30px; left: 10px;">æ²’é›»</div>
                <div class="battery-cap"></div><div class="battery-body"><span class="bat-sign sign-plus">+</span><span class="bat-sign sign-minus">-</span></div>
            </div>

            <div class="bulb-wrapper" id="b1-m1" style="top: 80px; left: 231px;" onclick="toggleBulb('b1-m1')">
                <div class="bulb-glass"></div><div class="bulb-base"></div><div class="bulb-status">å£æ‰</div>
            </div>
            <div class="bulb-wrapper" id="b2-m1" style="top: 160px; left: 231px;" onclick="toggleBulb('b2-m1')">
                <div class="bulb-glass"></div><div class="bulb-base"></div><div class="bulb-status">å£æ‰</div>
            </div>

            <div class="bulb-wrapper" id="b3-m1" style="top: 120px; left: 345px;" onclick="toggleBulb('b3-m1')">
                <div class="bulb-glass"></div><div class="bulb-base"></div><div class="bulb-status">å£æ‰</div>
            </div>

            <div class="polarity p-pos" style="top: 77px; left: 274px;">+</div> <div class="polarity p-neg" style="top: 125px; left: 275px;">-</div>
            <div class="polarity p-pos" style="top: 158px; left: 274px;">+</div> <div class="polarity p-neg" style="top: 205px; left: 275px;">-</div>
            <div class="polarity p-pos" style="top: 105px; left: 380px;">+</div> <div class="polarity p-neg" style="top: 170px; left: 380px;">-</div>
			<div class="polarity p-pos" style="top: 90px; left: 250px;">A</div>
			<div class="polarity p-pos" style="top: 173px; left: 250px;">B</div>
			<div class="polarity p-pos" style="top: 130px; left: 364px;">C</div>
        </div>

        <div class="circuit-scene" id="scene-mixed-2">
            <div class="wire wire-v" style="height: 180px; top: 60px; left: 130px;"></div> <div class="wire wire-h" style="width: 122px; top: 60px; left: 130px;"></div> <div class="wire wire-h" style="width: 120px; top: 60px; left: 250px;"></div> <div class="wire wire-v" style="height: 180px; top: 60px; left: 250px;"></div> <div class="wire wire-v" style="height: 180px; top: 60px; right: 130px;"></div> <div class="wire wire-h" style="width: 120px; bottom: 80px; left: 250px;"></div> <div class="wire wire-h" style="width: 122px; bottom: 80px; left: 130px;"></div> <div class="battery-group" id="bat-m2" style="bottom: 150px; left: 95px; transform: rotate(90deg);" onclick="toggleBattery('bat-m2')">
                <div class="battery-status" style="transform: rotate(-90deg); top: -30px; left: 10px;">æ²’é›»</div>
                <div class="battery-cap"></div><div class="battery-body"><span class="bat-sign sign-plus">+</span><span class="bat-sign sign-minus">-</span></div>
            </div>

            <div class="bulb-wrapper" id="b1-m2" style="top: 120px; left: 231px;" onclick="toggleBulb('b1-m2')">
                <div class="bulb-glass"></div><div class="bulb-base"></div><div class="bulb-status">å£æ‰</div>
            </div>
            <div class="bulb-wrapper" id="b2-m2" style="top: 120px; left: 345px;" onclick="toggleBulb('b2-m2')">
                <div class="bulb-glass"></div><div class="bulb-base"></div><div class="bulb-status">å£æ‰</div>
            </div>

            <div class="bulb-wrapper" id="b3-m2" style="bottom: 60px; left: 170px;" onclick="toggleBulb('b3-m2')">
                <div class="bulb-glass"></div><div class="bulb-base"></div><div class="bulb-status">å£æ‰</div>
            </div>

            <div class="polarity p-pos" style="top: 105px; left: 266px;">+</div> <div class="polarity p-neg" style="top: 170px; left: 266px;">-</div>
            <div class="polarity p-pos" style="top: 105px; left: 380px;">+</div> <div class="polarity p-neg" style="top: 170px; left: 380px;">-</div>
            <div class="polarity p-pos" style="bottom: 65px; left: 210px;">+</div> <div class="polarity p-neg" style="bottom: 65px; left: 165px;">-</div>
			<div class="polarity p-pos" style="bottom: 87px; left: 188px;">A</div>
			<div class="polarity p-pos" style="top: 132px; left: 250px;">B</div>
			<div class="polarity p-pos" style="top: 132px; left: 363px;">C</div>
		</div>

        <div class="info-panel">
            <span class="info-title" id="infoTitle">è«‹é¸æ“‡é›»è·¯</span>
            <span class="info-text" id="infoText">è§€å¯Ÿç‡ˆæ³¡å…‰æšˆçš„å¼·å¼±ï¼Œä»¥åŠæ–·è·¯æ™‚çš„å½±éŸ¿ã€‚</span>
        </div>

    </div>

    <div class="controls">
        <button class="btn active" onclick="switchScene('bulb-series', this)">ç‡ˆæ³¡ä¸²è¯</button>
        <button class="btn" onclick="switchScene('bulb-parallel', this)">ç‡ˆæ³¡ä¸¦è¯</button>
        <button class="btn" onclick="switchScene('bat-series', this)">é›»æ± ä¸²è¯</button>
        <button class="btn" onclick="switchScene('bat-parallel', this)">é›»æ± ä¸¦è¯</button>
		<button class="btn" onclick="switchScene('mixed-1', this)">é€²éšï¼šäºŒä¸²ä¸¦ä¸€</button>
		<button class="btn" onclick="switchScene('mixed-2', this)">é€²éšï¼šäºŒä¸¦ä¸²ä¸€</button>
    </div>

    <script>
        // å®Œå…¨ä¿ç•™åŸæœ‰çš„ JavaScript é‚è¼¯ï¼Œæœªåšä»»ä½•ä¿®æ”¹
        let currentMode = 'bulb-series';
        let brokenState = { 'b1-s': false, 'b2-s': false, 'b1-p': false, 'b2-p': false };
        let batteryDead = { 'bat1-s': false, 'bat2-s': false, 'bat1-p': false, 'bat2-p': false };
		
        // æ··åˆé›»è·¯çš„ç‹€æ…‹
        let brokenStateMixed = { 
            'b1-m1': false, 'b2-m1': false, 'b3-m1': false, 
            'b1-m2': false, 'b2-m2': false, 'b3-m2': false 
        };
        let batteryDeadMixed = { 'bat-m1': false, 'bat-m2': false };

        window.onload = function() {
            switchScene('bulb-series', document.querySelector('.btn'));
        }

        function switchScene(mode, btn) {
            currentMode = mode;
            document.querySelectorAll('.btn').forEach(b => b.classList.remove('active'));
            if(btn) btn.classList.add('active');
            document.querySelectorAll('.circuit-scene').forEach(s => s.classList.remove('active'));
            document.getElementById('scene-' + mode).classList.add('active');
            
            const subtitle = document.getElementById('mainSubtitle');
            if(mode.includes('bulb')) {
                subtitle.innerText = "é»æ“Šç‡ˆæ³¡æˆ–é›»æ± ï¼Œè§€å¯Ÿé›»è·¯è®ŠåŒ–";
            } else {
                subtitle.innerText = "é»æ“Šç‡ˆæ³¡æˆ–é›»æ± ï¼Œè§€å¯Ÿé›»è·¯è®ŠåŒ–";
            }
            updateCircuit();
        }

        function toggleBulb(id) {
            if (id in brokenStateMixed) {
                brokenStateMixed[id] = !brokenStateMixed[id];
                const bulb = document.getElementById(id);
                if (brokenStateMixed[id]) bulb.classList.add('broken');
                else bulb.classList.remove('broken');
            } else {
                brokenState[id] = !brokenState[id];
                const bulb = document.getElementById(id);
                if (brokenState[id]) bulb.classList.add('broken');
                else bulb.classList.remove('broken');
            }
            updateCircuit();
        }

        function toggleBattery(id) {
            if (id in batteryDeadMixed) {
                batteryDeadMixed[id] = !batteryDeadMixed[id];
                const bat = document.getElementById(id);
                if (batteryDeadMixed[id]) bat.classList.add('battery-dead');
                else bat.classList.remove('battery-dead');
            } else {
                batteryDead[id] = !batteryDead[id];
                const bat = document.getElementById(id);
                if (batteryDead[id]) bat.classList.add('battery-dead');
                else bat.classList.remove('battery-dead');
            }
            updateCircuit();
        }

        function updateCircuit() {
            document.querySelectorAll('.bulb-wrapper').forEach(b => {
                b.classList.remove('lit-normal', 'lit-dim', 'lit-bright');
            });

            if (currentMode === 'bulb-series') {
                const b1 = brokenState['b1-s'];
                const b2 = brokenState['b2-s'];
                if (!b1 && !b2) {
                    document.getElementById('b1-s').classList.add('lit-dim');
                    document.getElementById('b2-s').classList.add('lit-dim');
                    updateInfoText("é€šè·¯ (å¾®äº®)", "ç‡ˆæ³¡äº®åº¦è¼ƒå¼±ï¼Œå› ç‚ºèƒ½é‡è¢«å…©å€‹ç‡ˆæ³¡å¹³åˆ†äº†ã€‚");
                } else {
                    updateInfoText("æ–·è·¯", "å› ç‚ºåªæœ‰ä¸€æ¢è·¯ï¼Œä¸€å€‹ç‡ˆæ³¡ç†„æ»…ï¼Œå…¨éƒ¨è·Ÿè‘—ç†„æ»…ã€‚");
                }

            } else if (currentMode === 'bulb-parallel') {
                const b1 = brokenState['b1-p'];
                const b2 = brokenState['b2-p'];
                
                if (!b1) document.getElementById('b1-p').classList.add('lit-normal');
                if (!b2) document.getElementById('b2-p').classList.add('lit-normal');

                if (b1 && b2) {
                    updateInfoText("æ–·è·¯", "å…©é¡†ç‡ˆæ³¡éƒ½ç†„æ»…äº†ï¼Œæ²’æœ‰ä»»ä½•é€šè·¯ï¼Œå…¨éƒ½ä¸äº®ã€‚");
                } else {
                    let text = "å„ç‡ˆæ³¡éƒ½æ˜¯ç¨ç«‹é›»è·¯ï¼Œäº’ä¸å½±éŸ¿ã€‚";
                    
                    if (b1 && !b2) text = "ä¸Šæ–¹ç‡ˆæ³¡ç†„æ»…ï¼Œä¸‹æ–¹ç‡ˆæ³¡ä¾ç„¶æœƒäº®ï¼Œäº®åº¦ä¸è®Šï¼äº’ä¸å½±éŸ¿ã€‚";
                    if (!b1 && b2) text = "ä¸‹æ–¹ç‡ˆæ³¡ç†„æ»…ï¼Œä¸Šæ–¹ç‡ˆæ³¡ä¾ç„¶æœƒäº®ï¼Œäº®åº¦ä¸è®Šï¼äº’ä¸å½±éŸ¿ã€‚";
                    
                    updateInfoText("é€šè·¯ (æ­£å¸¸äº®)", text);
                }

            } else if (currentMode === 'bat-series') {
                if (batteryDead['bat1-s'] || batteryDead['bat2-s']) {
                    updateInfoText("æ–·è·¯", "ç•¶ä¸€é¡†é›»æ± æ²’é›»ï¼Œé›»æµæœƒè®Šå¾—éå¸¸å¾®å¼±ï¼Œç‡ˆæ³¡ç„¡æ³•ç™¼äº®ã€‚");
                } else {
                    document.getElementById('b1-bs').classList.add('lit-bright');
                    updateInfoText("é€šè·¯ (è¶…äº®)", "å…©é¡†é›»æ± ä¸²è¯ï¼Œé›»å£“ç›¸åŠ ï¼Œç‡ˆæ³¡è¶…ç´šäº®ï¼");
                }

            } else if (currentMode === 'bat-parallel') {
                let activeBats = 0;
                if (!batteryDead['bat1-p']) activeBats++;
                if (!batteryDead['bat2-p']) activeBats++;

                if (activeBats > 0) {
                    document.getElementById('b1-bp').classList.add('lit-normal');
                    if(activeBats === 2) {
                         updateInfoText("é€šè·¯ (æ­£å¸¸äº®)", "é›»æ± ä¸¦è¯ï¼Œé›»å£“ä¸è®Šï¼Œäº®åº¦å’Œä¸€é¡†é›»æ± ç›¸åŒã€‚");
                    } else {
                         updateInfoText("é€šè·¯ (æ­£å¸¸äº®)", "ä¸€é¡†æ²’é›»ï¼Œå¦ä¸€é¡†é‚„åœ¨ä¾›é›»ï¼Œäº®åº¦ç¶­æŒä¸è®Šï¼");
                    }
                } else {
                    updateInfoText("æ–·è·¯", "å…©é¡†é›»æ± éƒ½æ²’é›»äº†ï¼Œç‡ˆæ³¡ç†„æ»…ã€‚");
                }
            }
			
            else if (currentMode === 'mixed-1') {
                const bat = batteryDeadMixed['bat-m1'];
                const bSeries1 = brokenStateMixed['b1-m1'];
                const bSeries2 = brokenStateMixed['b2-m1'];
                const bSolo = brokenStateMixed['b3-m1'];

                if (bat) {
                    updateInfoText("æ–·è·¯", "é›»æ± æ²’é›»äº†ã€‚");
                } else {
                    let msgParts = [];
                    
                    if (!bSeries1 && !bSeries2) {
                        document.getElementById('b1-m1').classList.add('lit-dim');
                        document.getElementById('b2-m1').classList.add('lit-dim');
                        msgParts.push("ï¼¡ï¼¢ä¸²è¯(è¼ƒæš—)");
                    } else {
                        msgParts.push("ï¼¡ï¼¢è·¯ç·šå£ï¼‘é¡†å½¢åŒæ–·è·¯");
                    }

                    if (!bSolo) {
                        document.getElementById('b3-m1').classList.add('lit-bright');
                        msgParts.push("ï¼£ç¨ç«‹(è¶…äº®)");
                    } else {
                        msgParts.push("ï¼£è·¯ç·šæ–·è·¯");
                    }

                    if ((bSeries1 || bSeries2) && bSolo) {
                        updateInfoText("æ–·è·¯", "å…©æ¢æ”¯è·¯éƒ½ä¸é€šï¼Œå…¨æ»…ã€‚");
                    } else {
                        updateInfoText("ï¼¡ï¼¢ä¸²è¯ å†ä¸¦è¯ï¼£", "å…©æ¢ä¸¦è¯äº’ä¸å½±éŸ¿ã€‚" + msgParts.join("ï¼Œ") + "ã€‚");
                    }
                }
			}

            else if (currentMode === 'mixed-2') {
                const bat = batteryDeadMixed['bat-m2'];
                const bMain = brokenStateMixed['b3-m2'];
                const bSub1 = brokenStateMixed['b1-m2'];
                const bSub2 = brokenStateMixed['b2-m2'];

                if (bat) {
                    updateInfoText("æ–·è·¯", "é›»æ± æ²’é›»äº†ã€‚");
                } else if (bMain) {
                    updateInfoText("æ–·è·¯", "ï¼¡ç‡ˆæ³¡æœ‰å•é¡Œï¼Œé€ æˆæ•´å€‹é›»è·¯æ–·é›»ã€‚");
                } else {
                    let sub1_ok = !bSub1;
                    let sub2_ok = !bSub2;

                    if (sub1_ok && sub2_ok) {
                        document.getElementById('b3-m2').classList.add('lit-bright');
                        document.getElementById('b1-m2').classList.add('lit-dim');
                        document.getElementById('b2-m2').classList.add('lit-dim');
                        updateInfoText("ï¼¢ï¼£ä¸¦è¯ å†ä¸²è¯ï¼¡", "å…¨äº®æ™‚ï¼šï¼¡æ‰¿å—ç¸½é›»æµ(æœ€äº®)ï¼Œï¼¢ï¼£ä¸¦è¯é›»æµåˆ†æµ(è¼ƒæš—)ã€‚");
                    } else if (!sub1_ok && !sub2_ok) {
                        updateInfoText("æ–·è·¯", "ï¼¢ï¼£å…¨éƒ¨å£äº†ï¼Œè¿´è·¯ä¸é€šã€‚");
                    } else {
                        document.getElementById('b3-m2').classList.add('lit-normal');
                        
                        if (sub1_ok) document.getElementById('b1-m2').classList.add('lit-normal');
                        if (sub2_ok) document.getElementById('b2-m2').classList.add('lit-normal');
                        
                        updateInfoText("å°‘äº†ï¼¢æˆ–ï¼£ã€€é›»è·¯è®Šæˆï¼’ç‡ˆæ³¡ä¸²è¯", "ç¸½é›»é˜»è®Šå¤§ï¼Œç¸½é›»æµè®Šå°ï¼Œæ‰€ä»¥ã€Œï¼¡è®Šæš—ã€ï¼å¦ä¸€é¡†æ²’å£çš„å‰‡å› ç‚ºé€šéçš„é›»æµè®Šå¤§ï¼Œåè€Œã€Œè®Šäº®ã€ã€‚");
                    }
                }
            }
        }

        function updateInfoText(title, desc) {
            document.getElementById('infoTitle').innerText = title;
            document.getElementById('infoText').innerText = desc;
        }
    </script>
</body>
</html>