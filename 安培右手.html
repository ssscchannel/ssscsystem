<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <title>æ™Ÿè‡ªç„¶è¼”åŠ©ç³»çµ±ã€€é›»æµç£æ•ˆæ‡‰é€ æˆç£é‡åè½‰</title>
    
    <style>
        /* =========================================
           1. æ ¸å¿ƒæ¶æ§‹ï¼šApp Shell
           ========================================= */
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100dvh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-image: url('page.jpg'); 
            background-size: cover;
            background-position: center;
            font-family: 'Microsoft JhengHei', 'Segoe UI', sans-serif;
            color: #333;
        }

        .app-layout-wrapper {
            width: 100%;
            max-width: 600px; 
            height: 100%;
            display: flex;
            flex-direction: column;
            position: relative;
            background: transparent;
        }

        /* Header */
        .main-header {
            flex: 0 0 60px;
            width: 100%;
            background: linear-gradient(90deg, #1a2a6c, #b21f1f, #fdbb2d);
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            z-index: 100;
            display: flex;
            align-items: center;
            padding: 0 15px;
            box-sizing: border-box;
            color: white;
        }

        .logo-area {
            width: 40px;
            height: 40px;
            background-color: white;
            border-radius: 50%;
            margin-right: 15px;
            background-image: url('logo.jpg');
            background-size: cover;
            border: 2px solid #00d2ff;
            flex-shrink: 0;
        }

        .header-title {
            font-size: 1.0rem;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            color: white;
            white-space: normal;
            line-height: 1.2;          
            max-height: 2.4em;         
            display: -webkit-box;
            overflow: hidden;
            flex: 1;                   
            padding-right: 10px;       
        }

        .line-btn {
            margin-left: auto;
            background-color: #00B900;
            color: white;
            text-decoration: none;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.5);
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            white-space: nowrap;
        }

        /* Content Area */
        .content-scroll-area {
            flex: 1 1 auto;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            width: 100%;
            padding: 0;
            padding-bottom: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .ui-card {
            width: 96% !important;
            max-width: 96% !important;
            box-sizing: border-box;
            margin-left: auto;
            margin-right: auto;
            margin-top: 15px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border: 1px solid rgba(0,0,0,0.05);
            padding: 12px;
        }

        .topic-description {
            text-align: center;
            color: #444;
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* =========================================
           Footer Controls (å‚ç›´å°é½Šä¿®æ­£ç‰ˆ)
           ========================================= */
        .controls-dock {
            flex: 0 0 auto;
            width: 100%;
            background: rgba(255, 255, 255, 0.98);
            box-shadow: 0 -4px 15px rgba(0,0,0,0.1);
            z-index: 100;
            padding: 10px 15px; 
            padding-bottom: calc(15px + env(safe-area-inset-bottom));
            display: flex;
            flex-direction: row; 
            gap: 15px; 
            box-sizing: border-box;
        }

        .control-group {
            flex: 1;
            display: flex;
            flex-direction: column; 
            align-items: center;    
            gap: 6px;               
        }

        .status-label {
            font-size: 0.9rem;
            font-weight: bold;
            color: #555;
            height: 1.2em; 
            white-space: nowrap;
        }

        .action-btn {
            width: 100%;
            padding: 12px 0;
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 1.0rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            text-align: center;
        }
        .action-btn:active { transform: scale(0.98); }

        .btn-blue { background: linear-gradient(135deg, #3498db, #2980b9); }
        .btn-green { background: linear-gradient(135deg, #27ae60, #2ecc71); }

        /* =========================================
           2. æ¨¡æ“¬å™¨ç‰¹å®šæ¨£å¼
           ========================================= */
        :root {
            --wire-red: #e74c3c;
            --wire-dark: #444; 
        }

        .simulation-wrapper {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 15px;
            margin-bottom: 5px;
        }

        /* ä¿®æ”¹è™•ï¼šå»æ¡†ç·šåŒ– */
        .sim-board {
            position: relative;
            width: 350px;
            height: 380px;
            max-width: 95%;
            
            /* å°‡åŸæœ¬çš„ç™½è‰²èƒŒæ™¯æ”¹ç‚ºé€æ˜ï¼Œä¸¦ç§»é™¤é™°å½± */
            background: transparent; 
            box-shadow: none;
            
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: visible;
        }

        /* Animations */
        @keyframes flowDown { from { background-position: 0 0; } to { background-position: 0 40px; } }
        @keyframes flowUp { from { background-position: 0 0; } to { background-position: 0 -40px; } }
        @keyframes flowRight { from { background-position: 0 0; } to { background-position: 40px 0; } }
        @keyframes flowLeft { from { background-position: 0 0; } to { background-position: -40px 0; } }
        
        @keyframes pulseArrowStrong {
            0% { transform: translateY(-50%) scale(1); opacity: 1; filter: drop-shadow(0 0 0px rgba(243, 156, 18, 0)); }
            50% { transform: translateY(-50%) scale(1.4); opacity: 0.7; filter: drop-shadow(0 0 15px rgba(243, 156, 18, 0.9)); }
            100% { transform: translateY(-50%) scale(1); opacity: 1; filter: drop-shadow(0 0 0px rgba(243, 156, 18, 0)); }
        }

        /* Circuit Components */
        .circuit-frame { position: relative; width: 180px; height: 280px; box-sizing: border-box; }

        .common-wire {
            position: absolute; border-radius: 4px; box-shadow: 1px 1px 3px rgba(0,0,0,0.4);
            background-image: linear-gradient(-45deg, rgba(255,255,255,0.25) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.25) 50%, rgba(255,255,255,0.25) 75%, transparent 75%, transparent);
            background-size: 20px 20px, 100% 100%; transition: all 0.3s ease;
        }

        .active-wire {
            left: -3px; top: -6px; bottom: -6px; width: 8px;
            background-image: linear-gradient(-45deg, rgba(255,255,255,0.25) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.25) 50%, rgba(255,255,255,0.25) 75%, transparent 75%, transparent),
                              linear-gradient(90deg, #a93226, var(--wire-red) 40%, #ec7063 60%, #a93226);
        }

        .wire-black {
            background-image: linear-gradient(-45deg, rgba(255,255,255,0.25) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.25) 50%, rgba(255,255,255,0.25) 75%, transparent 75%, transparent),
                              linear-gradient(90deg, #2c3e50, #5d6d7e 40%, #85929e 60%, #2c3e50);
            z-index: 1;
        }

        .wire-top { top: -6px; left: -3px; right: -3px; height: 8px; background-image: linear-gradient(-45deg, rgba(255,255,255,0.25) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.25) 50%, rgba(255,255,255,0.25) 75%, transparent 75%, transparent), linear-gradient(0deg, #2c3e50, #5d6d7e 40%, #85929e 60%, #2c3e50); }
        .wire-right { right: -3px; top: -6px; bottom: -6px; width: 8px; }
        .wire-bottom { bottom: -6px; left: -3px; right: -3px; height: 8px; background-image: linear-gradient(-45deg, rgba(255,255,255,0.25) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.25) 50%, rgba(255,255,255,0.25) 75%, transparent 75%, transparent), linear-gradient(0deg, #2c3e50, #5d6d7e 40%, #85929e 60%, #2c3e50);}

        .flowing-down  { animation: flowDown 1s linear infinite; }
        .flowing-up    { animation: flowUp 1s linear infinite; }
        .flowing-right { animation: flowRight 1s linear infinite; }
        .flowing-left  { animation: flowLeft 1s linear infinite; }

        .current-arrow {
            position: absolute; left: 15px; top: 50%;
            font-size: 32px; color: #f39c12; font-weight: bold; text-shadow: 1px 1px 0 #fff;
            z-index: 50; pointer-events: none;
            animation: pulseArrowStrong 1.2s ease-in-out infinite;
        }

        .compass { width: 130px; height: 130px; background: #fff; border: 5px solid #bdc3c7; border-radius: 50%; position: absolute; left: 0; top: 50%; transform: translate(-50%, -50%); display: flex; justify-content: center; align-items: center; transition: transform 0.3s ease; background-image: linear-gradient(0deg, transparent 49%, #eee 49%, #eee 51%, transparent 51%), linear-gradient(90deg, transparent 49%, #eee 49%, #eee 51%, transparent 51%); }
        .needle { width: 14px; height: 100px; position: relative; transition: transform 0.6s cubic-bezier(0.4, 1.5, 0.6, 1); filter: drop-shadow(1px 1px 2px rgba(0,0,0,0.3)); }
        .needle-n { position: absolute; top: 0; border-left: 7px solid transparent; border-right: 7px solid transparent; border-bottom: 50px solid #e74c3c; }
        .needle-s { position: absolute; bottom: 0; border-left: 7px solid transparent; border-right: 7px solid transparent; border-top: 50px solid #2c3e50; }
        .compass-mark { position: absolute; font-size: 10px; color: #999; font-weight: bold; }
        
        .battery-container { position: absolute; right: -25px; top: 50%; transform: translateY(-50%); display: flex; flex-direction: column; align-items: center; z-index: 5; }
        .battery-body { width: 50px; height: 100px; background: linear-gradient(135deg, #34495e 0%, #5d6d7e 100%); border: 2px solid #fff; border-radius: 4px; box-shadow: 4px 4px 10px rgba(0,0,0,0.2); display: flex; flex-direction: column; justify-content: space-between; align-items: center; padding: 5px 0; }
        .battery-cap { width: 20px; height: 10px; background: #95a5a6; border: 1px solid #7f8c8d; }
        .bat-text { font-size: 24px; font-weight: 900; line-height: 1; }
        .text-plus { color: #ff5252; text-shadow: 0 0 5px rgba(255, 82, 82, 0.6); }
        .text-minus { color: #448aff; text-shadow: 0 0 5px rgba(68, 138, 255, 0.6); }

        .mode-wire-top .active-wire { z-index: 20; } .mode-wire-top .compass { z-index: 10; filter: brightness(0.95); }
        .mode-wire-bottom .active-wire { z-index: 10; opacity: 0.6; } .mode-wire-bottom .compass { z-index: 20; box-shadow: 0 15px 30px rgba(0,0,0,0.25); }

    </style>
</head>
<body>

    <div class="app-layout-wrapper">
        
        <header class="main-header">
            <a href="index.html" class="logo-area" title="è¿”å›å¤§å»³"></a>
            <div class="header-title">
                æ™Ÿè‡ªç„¶è¼”åŠ©ç³»çµ±<br>
                é›»æµç£æ•ˆæ‡‰é€ æˆç£é‡åè½‰
            </div>
            
            <a href="https://line.me/ti/g2/TTCqPpZP6lQqX1z_AUDPNm4977Dvylew3O7oBg" target="_blank" class="line-btn">
                åŠ  LINE è¨è«–
            </a>
        </header>

        <main class="content-scroll-area">
            
            <div class="ui-card topic-description">
                ğŸ’¡ å°ç·šèˆ‡ç£é‡çš„ä½ç½®é—œä¿‚ä»¥åŠé›»æµæ–¹å‘ï¼Œ<br>å¦‚ä½•å½±éŸ¿ç£é‡åè½‰æ–¹å‘ï¼Ÿ
            </div>
			
            <div class="simulation-wrapper">
                <div class="sim-board" id="simContainer">
                    <div class="circuit-frame">
                        <div class="common-wire wire-black wire-top"></div>
                        <div class="common-wire wire-black wire-right"></div>
                        <div class="common-wire wire-black wire-bottom"></div>
                        
                        <div class="active-wire common-wire"></div>
                        
                        <div class="current-arrow" id="arrow">â¬‡</div>
                        
                        <div class="compass">
                            <div class="compass-mark" style="top:5px">N</div>
                            <div class="compass-mark" style="bottom:5px">S</div>
                            <div class="compass-mark" style="left:5px">W</div>
                            <div class="compass-mark" style="right:5px">E</div>
                            <div class="needle" id="needle">
                                <div class="needle-n"></div>
                                <div class="needle-s"></div>
                            </div>
                        </div>
                        
                        <div class="battery-container">
                            <div class="battery-cap" id="capTop" style="border-radius: 3px 3px 0 0; margin-bottom: -1px;"></div>
                            <div class="battery-body">
                                <span class="bat-text text-plus" id="signTop">+</span>
                                <div style="width:20px; height:2px; background:rgba(255,255,255,0.1)"></div>
                                <span class="bat-text text-minus" id="signBot">-</span>
                            </div>
                            <div class="battery-cap" id="capBot" style="border-radius: 0 0 3px 3px; margin-top: -1px; display:none;"></div>
                        </div>
                    </div>
                    </div>
            </div>

        </main>

        <footer class="controls-dock">
            <div class="control-group">
                <div class="status-label" id="txtCurrent">é›»æµï¼šå‘ä¸‹</div>
                <button class="action-btn btn-blue" onclick="toggleCurrent()">åˆ‡æ›é›»æµæ–¹å‘</button>
            </div>

            <div class="control-group">
                <div class="status-label" id="txtPos">å°ç·šï¼šåœ¨ç£é‡ä¸Šæ–¹</div>
                <button class="action-btn btn-green" onclick="togglePosition()">æ”¹è®Šå°ç·šä½ç½®</button>
            </div>
		</footer>

    </div>

    <script>
        // ç‹€æ…‹è®Šæ•¸
        let isDown = true;      // é›»æµæ˜¯å¦å‘ä¸‹
        let isWireTop = true;   // å°ç·šæ˜¯å¦åœ¨ä¸Šæ–¹

        function update() {
            const container = document.getElementById('simContainer');
            const arrow = document.getElementById('arrow');
            const needle = document.getElementById('needle');
            
            const signTop = document.getElementById('signTop');
            const signBot = document.getElementById('signBot');
            const capTop = document.getElementById('capTop');
            const capBot = document.getElementById('capBot');

            const txtCurrent = document.getElementById('txtCurrent');
            const txtPos = document.getElementById('txtPos');
            
			const wireLeft = document.querySelector('.active-wire');
			const wireTop = document.querySelector('.wire-top');
			const wireRight = document.querySelector('.wire-right');
			const wireBottom = document.querySelector('.wire-bottom');
			const allWires = [wireLeft, wireTop, wireRight, wireBottom];

            // 1. è¨­å®šå±¤ç´šèˆ‡ä½ç½®æ–‡å­—
            if (isWireTop) {
                container.classList.add('mode-wire-top');
                container.classList.remove('mode-wire-bottom');
                txtPos.innerText = "å°ç·šï¼šåœ¨ç£é‡ä¸Šæ–¹";
                txtPos.style.color = "#d35400";
            } else {
                container.classList.add('mode-wire-bottom');
                container.classList.remove('mode-wire-top');
                txtPos.innerText = "å°ç·šï¼šåœ¨ç£é‡ä¸‹æ–¹";
                txtPos.style.color = "#8e44ad";
            }

            // 2. è¨­å®šé›»æµå‹•ç•«
            allWires.forEach(w => {
			    w.classList.remove('flowing-up', 'flowing-down', 'flowing-left', 'flowing-right');
            });
			
			if (isDown) {
                signTop.innerText = "+"; signTop.className = "bat-text text-plus";
                signBot.innerText = "-"; signBot.className = "bat-text text-minus";
                capTop.style.display = "block";
                capBot.style.display = "none";
                
                arrow.innerText = "â¬‡";
                txtCurrent.innerText = "é›»æµï¼šå‘ä¸‹";
				txtCurrent.style.color = "#d35400";
                
				wireLeft.classList.add('flowing-down');
				wireTop.classList.add('flowing-left');
				wireRight.classList.add('flowing-up');
				wireBottom.classList.add('flowing-right');
				
            } else {
                signTop.innerText = "-"; signTop.className = "bat-text text-minus";
                signBot.innerText = "+"; signBot.className = "bat-text text-plus";
                capTop.style.display = "none";
                capBot.style.display = "block";

                arrow.innerText = "â¬†";
                txtCurrent.innerText = "é›»æµï¼šå‘ä¸Š";
				txtCurrent.style.color = "#8e44ad";
                
				wireLeft.classList.add('flowing-up');
				wireTop.classList.add('flowing-right');
				wireRight.classList.add('flowing-down');
				wireBottom.classList.add('flowing-left');
            }

            // 3. è§’åº¦è¨ˆç®—
            let angle = 0;
            if (isDown) {
                angle = isWireTop ? 45 : -45;
            } else {
                angle = isWireTop ? -45 : 45;
            }
            needle.style.transform = `rotate(${angle}deg)`;
        }

        function toggleCurrent() { isDown = !isDown; update(); }
        function togglePosition() { isWireTop = !isWireTop; update(); }

        window.addEventListener('load', update);
    </script>
</body>

</html>

