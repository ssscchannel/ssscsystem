<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <title>æ™Ÿè‡ªç„¶è¼”åŠ©ç³»çµ±ã€€ç‡ˆæ³¡äº®æš—æ¨¡æ“¬</title>
    
    <style>
        /* =========================================
           1. æ ¸å¿ƒæ¶æ§‹ï¼šApp Shell (å›ºå®šè¦–çª—)
           ========================================= */
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100dvh;
            overflow: hidden;
            
            display: flex;
            flex-direction: column;
            align-items: center;
            
            background-image: url('page.jpg'); 
            background-size: cover;
            background-position: center;
            font-family: 'Microsoft JhengHei', 'Segoe UI', sans-serif;
            color: #333;
        }

        .app-layout-wrapper {
            width: 100%;
            max-width: 600px; 
            height: 100%;
            display: flex;
            flex-direction: column;
            position: relative;
            background: transparent;
        }

        /* =========================================
           2. é ‚éƒ¨ï¼šæ¨™é¡Œåˆ— (å›ºå®š)
           ========================================= */
        .main-header {
            flex: 0 0 60px;
            width: 100%;
            background: linear-gradient(90deg, #1a2a6c, #b21f1f, #fdbb2d);
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            z-index: 100;
            display: flex;
            align-items: center;
            padding: 0 15px;
            box-sizing: border-box;
            color: white;
        }

        .logo-area {
            width: 40px;
            height: 40px;
            background-color: white;
            border-radius: 50%;
            margin-right: 15px;
            background-image: url('logo.jpg');
            background-size: cover;
            border: 2px solid #00d2ff;
            flex-shrink: 0;
        }

        .header-title {
            font-size: 1.0rem;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            color: white;
            white-space: normal;
            line-height: 1.2;          
            max-height: 2.4em;         
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            flex: 1;                   
            padding-right: 10px;       
        }

        .line-btn {
            margin-left: auto;
            background-color: #00B900;
            color: white;
            text-decoration: none;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.5);
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            white-space: nowrap;
        }
        
        .line-btn:active {
            transform: scale(0.95);
            background-color: #009900;
        }

        /* =========================================
           3. ä¸­é–“ï¼šå…§å®¹å€ (å¯æ»¾å‹•)
           ========================================= */
        .content-scroll-area {
            flex: 1 1 auto;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            width: 100%;
            padding: 0;
            padding-bottom: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* [ä¿®æ­£] è¦–è¦ºæ¨¡æ“¬å€å®¹å™¨ */
.simulation-container {
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: flex-start; /* ä¿®æ”¹ï¼šæ”¹ç‚ºé ä¸Šå°é½Šï¼Œé¿å…å‚ç›´ç½®ä¸­é€ æˆçš„æ¼‚æµ®æ„Ÿ */
    position: relative;
    
    /* é—œéµï¼šå¢åŠ é ‚éƒ¨é–“è·ï¼Œè§£æ±ºè¢«èªªæ˜æ¡†åˆ‡åˆ°æˆ–å£“ä½çš„å•é¡Œ */
    margin-top: 10px;
    padding-top: 20px; 
    
    /* é ç•™é«˜åº¦çµ¦ç¸®æ”¾å¾Œçš„é›»è·¯åœ–ï¼Œé¿å…ä¸‹æ–¹å…§å®¹è·³å‹• */
    min-height: 300px; 
    overflow: visible; /* ä¿®æ”¹ï¼šå…è¨±è¶…å‡ºï¼Œé¿å…é™°å½±è¢«åˆ‡æ‰ (é›–ç„¶ç¾åœ¨æ²’é™°å½±äº†) */
}
        
        /* [ä¿®æ­£] é›»è·¯æ¿å›ºå®šå°ºå¯¸å®¹å™¨ - å»é™¤èƒŒæ™¯æ¡†ç·šç‰ˆ */
.circuit-board-scale {
    width: 500px;        
    height: 450px;       
    min-width: 500px;    
    min-height: 450px;   
    flex-shrink: 0;      
    
    position: relative;
    transform-origin: center top; 
    
    /* é—œéµï¼šèƒŒæ™¯å…¨é€æ˜ï¼Œå»é™¤é‚Šæ¡†èˆ‡é™°å½± */
    background: transparent; 
    box-shadow: none;
    border: none;
    border-radius: 0;
}

        /* =========================================
           4. [æ¨™æº–çµ„ä»¶] é€šç”¨ UI å¡ç‰‡
           ========================================= */
        .ui-card {
            width: 96% !important;
            max-width: 96% !important;
            box-sizing: border-box;
            margin-left: auto;
            margin-right: auto;
            margin-top: 15px;
            
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border: 1px solid rgba(0,0,0,0.05);
            padding: 12px;
        }

        /* =========================================
           5. åº•éƒ¨æ§åˆ¶å¡¢ (Footer) - æœ¬æ¨¡æ“¬ä¸éœ€è¦ï¼Œéš±è—æˆ–ç•™ç©º
           ========================================= */
        /* [ä¿®æ­£] åº•éƒ¨æ§åˆ¶å¡¢ - æ”¹ç‚º 2x2 ç¶²æ ¼ä½ˆå±€ */
.controls-dock {
    flex: 0 0 auto;
    width: 100%;
    background: rgba(255, 255, 255, 0.98);
    box-shadow: 0 -4px 15px rgba(0,0,0,0.1);
    z-index: 1000; /* ç¢ºä¿æµ®åœ¨æœ€ä¸Šå±¤ */
    padding: 10px;
    box-sizing: border-box;
    
    /* é—œéµï¼šåº•éƒ¨å®‰å…¨å€å‘¼å¸ç©ºé–“ (é©é… iPhone X ä»¥ä¸Š) */
    padding-bottom: calc(10px + env(safe-area-inset-bottom));
    
    /* å•Ÿç”¨ç¶²æ ¼æ’ç‰ˆ */
    display: grid;
    grid-template-columns: 1fr 1fr; /* å…©æ¬„ */
    gap: 8px; /* æŒ‰éˆ•é–“è· */
}

        /* =========================================
           6. [ç§»æ¤] é›»è·¯å…ƒä»¶å°ˆå±¬æ¨£å¼
           ========================================= */
        :root {
            --wire-color: #333;
            --bulb-off: #bdc3c7;
            --bulb-dim-color: #d35400;   /* æœ€æš— */
            --bulb-norm-color: #f1c40f;  /* æ™®é€š */
            --bulb-bright-color: #fff700;/* æœ€äº® */
        }

        .circuit-scene {
            position: absolute; width: 100%; height: 100%; display: none; top: 0; left: 0;
        }
        .circuit-scene.active { display: block; }

        /* å°ç·š */
        .wire {
            position: absolute; 
            background-image: linear-gradient(0deg, #2c3e50, #5d6d7e 40%, #85929e 60%, #2c3e50);
            border-radius: 4px; z-index: 1; box-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        .wire-h { height: 6px; } 
        .wire-v { width: 6px; }

        /* ç‡ˆæ³¡ */
        .bulb-wrapper {
            position: absolute; display: flex; flex-direction: column; align-items: center;
            z-index: 10; transition: transform 0.1s;
            cursor: pointer;
        }
        .bulb-wrapper:active { transform: scale(0.95); }

        .bulb-glass {
            width: 40px; height: 40px; border-radius: 50%; background-color: var(--bulb-off);
            border: 2px solid #95a5a6; box-shadow: inset -2px -2px 5px rgba(0,0,0,0.2);
            position: relative; transition: all 0.3s ease;
        }
        .bulb-base {
    width: 20px; 
    height: 16px; /* ç¨å¾®åŠ é«˜ 1px è®“æ¯”ä¾‹æ›´ç©© */
    
    /* ä¿®æ”¹ï¼šä½¿ç”¨å¹³æ»‘çš„é‡‘å±¬æ¼¸å±¤ï¼Œå»é™¤èºç´‹é›œè¨Š */
    background: linear-gradient(90deg, #7f8c8d, #bdc3c7, #95a5a6);
    
    border: 1px solid #555; 
    margin-top: -2px; 
    
    /* ä¿®æ”¹ï¼šåº•éƒ¨å°åœ“è§’ï¼Œçœ‹èµ·ä¾†åƒä¸€å€‹æ¨™æº–æ¥é» */
    border-radius: 0 0 6px 6px;
    
    /* å¢åŠ ä¸€é»é»é™°å½±å¢åŠ ç«‹é«”æ„Ÿ */
    box-shadow: inset 1px 1px 2px rgba(255,255,255,0.3);
    z-index: 9; /* ç¢ºä¿è“‹åœ¨å°ç·šä¸Šæ–¹ */
}
        
        /* ç‡ˆæ³¡äº®åº¦ç‹€æ…‹ */
        .lit-dim .bulb-glass { background-color: var(--bulb-dim-color); border-color: #d35400; box-shadow: 0 0 5px var(--bulb-dim-color), inset -2px -2px 5px rgba(0,0,0,0.1); }
        .lit-normal .bulb-glass { background-color: var(--bulb-norm-color); border-color: #f39c12; box-shadow: 0 0 25px var(--bulb-norm-color), inset -2px -2px 5px rgba(0,0,0,0.1); }
        .lit-bright .bulb-glass { background-color: var(--bulb-bright-color); border-color: #fff; box-shadow: 0 0 50px var(--bulb-bright-color), 0 0 80px rgba(255, 255, 224, 0.9), inset 0 0 10px #fff; }

        .bulb-wrapper.is-broken .bulb-glass {
            background-color: #444 !important;
            box-shadow: none !important;
            border-color: #333 !important;
        }

        /* é›»æ±  */
        .battery-group {
            position: absolute; display: flex; align-items: center; z-index: 5;
            transition: transform 0.1s; cursor: pointer;
        }
        .battery-group:active { transform: scale(0.95); }
        
        .battery-body {
            width: 60px; height: 36px; background: linear-gradient(to bottom, #34495e 0%, #5d6d7e 50%, #2c3e50 100%);
            border: 2px solid #ecf0f1; border-radius: 4px; box-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            display: flex; justify-content: space-between; align-items: center; padding: 0 5px; position: relative;
            transition: all 0.3s;
        }
        .battery-cap {
            width: 8px; height: 18px; background: linear-gradient(to bottom, #bdc3c7, #ecf0f1, #bdc3c7);
            border: 1px solid #95a5a6; border-right: none; border-radius: 3px 0 0 3px;
            position: absolute; left: -8px; top: 50%; transform: translateY(-50%); transition: all 0.3s;
        }
        .bat-sign { font-weight: 900; font-size: 18px; line-height: 1; }
        .sign-plus { color: #ff5252; text-shadow: 0 0 4px rgba(255, 82, 82, 0.8); }
        .sign-minus { color: #448aff; text-shadow: 0 0 4px rgba(68, 138, 255, 0.8); }

        .battery-group.is-dead .battery-body {
            background: linear-gradient(to bottom, #7f8c8d, #95a5a6) !important;
            border-color: #7f8c8d !important;
        }
        .battery-group.is-dead .battery-cap { background: #95a5a6 !important; }
        .battery-group.is-dead .sign-plus, 
        .battery-group.is-dead .sign-minus { color: #bdc3c7 !important; text-shadow: none !important; }

        /* [ç§»æ¤èˆ‡å„ªåŒ–] é¢æ¿èˆ‡æ§åˆ¶é … */
        .custom-info-box {
            background: #ecf0f1;
            padding: 10px;
            border-radius: 8px;
            border-left: 5px solid #3498db;
            margin-bottom: 15px;
        }
        .info-title { font-weight: bold; color: #2980b9; margin-bottom: 5px; display: block; font-size: 1.1rem; }
        .info-text { font-size: 1rem; line-height: 1.5; color: #555; display: block; white-space: pre-line; }

        .controls-grid { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 10px; 
            width: 100%;
        }
        /* [ä¿®æ­£] åº•éƒ¨æŒ‰éˆ•æ¨£å¼å¾®èª¿ - è®“å­—é«”é©æ‡‰å°ç©ºé–“ */
.scene-btn { 
    padding: 10px 5px; 
    border: none; 
    border-radius: 8px; 
    font-size: 0.9rem; 
    cursor: pointer; 
    color: white; 
    transition: all 0.2s; 
    background: #95a5a6; 
    font-family: inherit; 
    line-height: 1.2;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
}
.scene-btn:hover { filter: brightness(1.1); }
.scene-btn:active { transform: scale(0.98); }
.scene-btn.active { 
    background: linear-gradient(135deg, #3498db, #2980b9); 
    box-shadow: 0 2px 5px rgba(0,0,0,0.3); 
    font-weight: bold;
}

/* [ä¿®æ­£] å„€è¡¨æ¿å°ˆç”¨æ¨£å¼ - ç·Šæ¹Šå‹ */
#status-dashboard {
    padding: 10px 15px; /* æ¸›å°‘å…§è· */
    margin-top: 10px;   /* æ¸›å°‘èˆ‡æ¨™é¡Œçš„è·é›¢ */
    min-height: 80px;   /* é ç•™å›ºå®šé«˜åº¦ï¼Œé¿å…æ–‡å­—è®Šæ›æ™‚ç•«é¢è·³å‹• */
    display: flex;
    flex-direction: column;
    justify-content: center;
    border-left: 5px solid #3498db; /* è¦–è¦ºå¼•å°ï¼šè—è‰²é£¾æ¢ */
}

.interaction-hint {
    font-size: 0.85rem;      /* å­—é«”ç¸®å° */
    color: #7f8c8d;          /* ç°è‰²ï¼Œé™ä½è¦–è¦ºæ¬Šé‡ */
    background-color: #f7f9f9; /* æ¥µæ·¡çš„ç°è‰²èƒŒæ™¯ */
    padding: 4px 10px;
    border-radius: 12px;
    display: inline-block;   /* åŒ…è¦†æ–‡å­—å³å¯ */
    margin-top: 5px;
    border: 1px dashed #bdc3c7; /* è™›ç·šé‚Šæ¡†å¢åŠ ã€Œç­†è¨˜æ„Ÿã€ */
}

/* [ä¿®æ­£] å„€è¡¨æ¿æ’ç‰ˆå®¹å™¨ */
.dashboard-header-row {
    display: flex;
    flex-wrap: wrap; /* æ‰‹æ©Ÿéçª„æ™‚å…è¨±æŠ˜è¡Œï¼Œé¿å…çˆ†ç‰ˆ */
    justify-content: center;
    align-items: center;
    gap: 8px; /* æ¨™é¡Œèˆ‡ç­”æ¡ˆä¹‹é–“çš„è·é›¢ */
    margin-bottom: 8px;
}

/* [æ–°å¢] ç­”æ¡ˆå¼·èª¿æ¨™ç±¤ (äº®åº¦) */
.answer-badge {
    display: inline-block;
    background-color: #d35400; /* æ¶çœ¼çš„æ©˜ç´…è‰²ï¼Œå¼·èª¿ã€Œé€™æ˜¯è€ƒé»ã€ */
    color: white;
    font-size: 1rem;
    font-weight: bold;
    padding: 2px 8px;
    border-radius: 6px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    transform: translateY(-1px); /* å¾®èª¿è¦–è¦ºå¹³è¡¡ */
}

/* [ä¿®æ­£] èªªæ˜æ–‡å­— - æ”¹ç‚ºé å·¦å°é½Š */
.dashboard-text-left {
    font-size: 0.95rem; 
    color: #555; 
    display: block; 
    text-align: left;       /* é—œéµä¿®æ­£ï¼šé å·¦ */
    line-height: 1.6;       /* å¢åŠ è¡Œé«˜ï¼Œæå‡é–±è®€èˆ’é©åº¦ */
    padding: 0 10px;        /* å·¦å³ç•™ç™½ï¼Œé¿å…è²¼é½Šé‚Šæ¡† */
    margin-bottom: 8px;
}

    </style>
</head>
<body>

    <div class="app-layout-wrapper">
        
        <header class="main-header">
            <a href="index.html" class="logo-area" title="è¿”å›å¤§å»³"></a>
            <div class="header-title">æ™Ÿè‡ªç„¶è¼”åŠ©ç³»çµ±<br>ç‡ˆæ³¡äº®æš—æ¨¡æ“¬</div>
            
            <a href="https://line.me/ti/g2/TTCqPpZP6lQqX1z_AUDPNm4977Dvylew3O7oBg" target="_blank" class="line-btn">
                åŠ  LINE è¨è«–
            </a>
        </header>

        <main class="content-scroll-area">
    
<div class="ui-card" id="status-dashboard" style="margin-bottom: 5px; padding: 10px 5px;">
    
    <div class="dashboard-header-row">
        <span class="info-title" id="infoTitle" style="font-size: 1.1rem; color: #2980b9; margin: 0;">
            è«‹é¸æ“‡é›»è·¯
        </span>
        <span class="answer-badge" id="infoBrightness" style="display:none;">
            äº®åº¦ï¼š?
        </span>
    </div>
    
    <div class="dashboard-text-left" id="infoText">
        è«‹é»æ“Šä¸‹æ–¹æŒ‰éˆ•åˆ‡æ›ä¸åŒæ¥æ³•<br>è§€å¯Ÿç‡ˆæ³¡äº®åº¦è®ŠåŒ–
    </div>

    <div style="text-align: center;"> <div class="interaction-hint">
            ğŸ’¡ é»æ“Šã€Œç‡ˆæ³¡ã€æˆ–ã€Œé›»æ± ã€å¯æ¨¡æ“¬æ•…éšœèˆ‡æ²’é›»
        </div>
    </div>
</div>
    
    <div class="simulation-container" id="sim-container">
        <div class="circuit-board-scale" id="circuit-board">
            
            <div class="circuit-scene" id="scene-A">
                <div class="wire wire-h" style="width: 240px; top: 40px; left: 130px;"></div>
                <div class="wire wire-v" style="height: 270px; top: 40px; left: 130px;"></div>
                <div class="wire wire-v" style="height: 270px; top: 40px; left: 364px;"></div>
                <div class="wire wire-h" style="width: 240px; top: 304px; left: 130px;"></div>
                <div class="bulb-wrapper" id="a-b1" style="top: 20px; left: 170px;"><div class="bulb-glass"></div><div class="bulb-base"></div></div>
                <div class="bulb-wrapper" id="a-b2" style="top: 20px; left: 290px;"><div class="bulb-glass"></div><div class="bulb-base"></div></div>
                <div class="battery-group" id="a-bat1" style="top: 289px; left: 175px;">
                    <div class="battery-cap"></div><div class="battery-body"><span class="bat-sign sign-plus">+</span><span class="bat-sign sign-minus">-</span></div>
                </div>
                <div class="battery-group" id="a-bat2" style="top: 289px; left: 265px;">
                    <div class="battery-cap"></div><div class="battery-body"><span class="bat-sign sign-plus">+</span><span class="bat-sign sign-minus">-</span></div>
                </div>
            </div>

            <div class="circuit-scene" id="scene-B">
                <div class="wire wire-h" style="width: 240px; top: 40px; left: 130px;"></div>
                <div class="wire wire-v" style="height: 270px; top: 40px; left: 130px;"></div>
                <div class="wire wire-v" style="height: 270px; top: 40px; left: 364px;"></div>
                <div class="wire wire-h" style="width: 240px; top: 244px; left: 130px;"></div> 
                <div class="wire wire-h" style="width: 240px; top: 304px; left: 130px;"></div> 
                <div class="bulb-wrapper" id="b-b1" style="top: 20px; left: 170px;"><div class="bulb-glass"></div><div class="bulb-base"></div></div>
                <div class="bulb-wrapper" id="b-b2" style="top: 20px; left: 290px;"><div class="bulb-glass"></div><div class="bulb-base"></div></div>
                <div class="battery-group" id="b-bat1" style="top: 229px; left: 220px;" onclick="toggleState(this)">
                    <div class="battery-cap"></div><div class="battery-body"><span class="bat-sign sign-plus">+</span><span class="bat-sign sign-minus">-</span></div>
                </div>
                <div class="battery-group" id="b-bat2" style="top: 289px; left: 220px;" onclick="toggleState(this)">
                    <div class="battery-cap"></div><div class="battery-body"><span class="bat-sign sign-plus">+</span><span class="bat-sign sign-minus">-</span></div>
                </div>
            </div>

            <div class="circuit-scene" id="scene-C">
                <div class="wire wire-h" style="width: 240px; top: 30px; left: 130px;"></div>
                <div class="wire wire-h" style="width: 240px; top: 100px; left: 130px;"></div>
                <div class="wire wire-v" style="height: 280px; top: 30px; left: 130px;"></div>
                <div class="wire wire-v" style="height: 280px; top: 30px; left: 364px;"></div>
                <div class="wire wire-h" style="width: 240px; top: 304px; left: 130px;"></div>
                <div class="bulb-wrapper" id="c-b1" style="top: 10px; left: 230px;" onclick="toggleState(this)"><div class="bulb-glass"></div><div class="bulb-base"></div></div>
                <div class="bulb-wrapper" id="c-b2" style="top: 80px; left: 230px;" onclick="toggleState(this)"><div class="bulb-glass"></div><div class="bulb-base"></div></div>
                <div class="battery-group" id="c-bat1" style="top: 289px; left: 175px;">
                    <div class="battery-cap"></div><div class="battery-body"><span class="bat-sign sign-plus">+</span><span class="bat-sign sign-minus">-</span></div>
                </div>
                <div class="battery-group" id="c-bat2" style="top: 289px; left: 265px;">
                    <div class="battery-cap"></div><div class="battery-body"><span class="bat-sign sign-plus">+</span><span class="bat-sign sign-minus">-</span></div>
                </div>
            </div>

            <div class="circuit-scene" id="scene-D">
                <div class="wire wire-h" style="width: 240px; top: 30px; left: 130px;"></div>
                <div class="wire wire-h" style="width: 240px; top: 90px; left: 130px;"></div> 
                <div class="wire wire-v" style="height: 280px; top: 30px; left: 130px;"></div>
                <div class="wire wire-v" style="height: 280px; top: 30px; left: 364px;"></div>
                <div class="wire wire-h" style="width: 240px; top: 244px; left: 130px;"></div>
                <div class="wire wire-h" style="width: 240px; top: 304px; left: 130px;"></div>
                <div class="bulb-wrapper" id="d-b1" style="top: 10px; left: 230px;" onclick="toggleState(this)"><div class="bulb-glass"></div><div class="bulb-base"></div></div>
                <div class="bulb-wrapper" id="d-b2" style="top: 70px; left: 230px;" onclick="toggleState(this)"><div class="bulb-glass"></div><div class="bulb-base"></div></div>
                <div class="battery-group" id="d-bat1" style="top: 229px; left: 220px;" onclick="toggleState(this)">
                    <div class="battery-cap"></div><div class="battery-body"><span class="bat-sign sign-plus">+</span><span class="bat-sign sign-minus">-</span></div>
                </div>
                <div class="battery-group" id="d-bat2" style="top: 289px; left: 220px;" onclick="toggleState(this)">
                    <div class="battery-cap"></div><div class="battery-body"><span class="bat-sign sign-plus">+</span><span class="bat-sign sign-minus">-</span></div>
                </div>
            </div>

        </div> </div> </main>
        
        <footer class="controls-dock">
    <button class="scene-btn" onclick="switchScene('A', this)">ç‡ˆæ³¡ä¸²è¯<br>é›»æ± ä¸²è¯</button>
    <button class="scene-btn" onclick="switchScene('B', this)">ç‡ˆæ³¡ä¸²è¯<br>é›»æ± ä¸¦è¯</button>
    <button class="scene-btn" onclick="switchScene('C', this)">ç‡ˆæ³¡ä¸¦è¯<br>é›»æ± ä¸²è¯</button>
    <button class="scene-btn" onclick="switchScene('D', this)">ç‡ˆæ³¡ä¸¦è¯<br>é›»æ± ä¸¦è¯</button>
</footer>

    </div>

    <script>
        // æ ¸å¿ƒé‚è¼¯å€
        
        // 1. åˆå§‹åŒ–èˆ‡äº‹ä»¶ç›£è½
        function init() {
            // é è¨­é¸æ“‡ A å ´æ™¯
            switchScene('A', document.querySelector('.scene-btn'));
            autoFitCircuit();
            console.log("æ™Ÿè‡ªç„¶è¼”åŠ©ç³»çµ± - ç‡ˆæ³¡æ¨¡æ“¬åˆå§‹åŒ–å®Œæˆ");
        }
        
        window.addEventListener('load', init);
        window.addEventListener('resize', autoFitCircuit);

        // 2. è‡ªå‹•ç¸®æ”¾é‚è¼¯ (ç¢ºä¿ 500px å¯¬çš„é›»è·¯åœ–åœ¨æ‰‹æ©Ÿä¸Šå®Œæ•´é¡¯ç¤º)
        function autoFitCircuit() {
            const board = document.getElementById('circuit-board');
            const container = document.getElementById('sim-container');
            const logicalWidth = 500; 
            const logicalHeight = 450;
            
            // å–å¾—å®¹å™¨å¯¦éš›å¯¬åº¦ (ç¨å¾®ç•™é‚Š)
            const availableWidth = container.clientWidth - 20; 
            
            // è¨ˆç®—ç¸®æ”¾æ¯”ä¾‹ (ä¸è¶…é 1ï¼Œé¿å…é›»è…¦ç‰ˆéå¤§)
            let scale = Math.min(availableWidth / logicalWidth, 1);
            
            // æ‡‰ç”¨ç¸®æ”¾
            board.style.transform = `scale(${scale})`;
            
            // èª¿æ•´å®¹å™¨é«˜åº¦ï¼Œé¿å…ç¸®æ”¾å¾Œä¸‹æ–¹ç•™ç™½éå¤š
            container.style.height = `${logicalHeight * scale}px`;
            container.style.minHeight = `${logicalHeight * scale}px`;
        }

        // 3. å ´æ™¯åˆ‡æ›é‚è¼¯
        function switchScene(mode, btn) {
            // æ›´æ–°æŒ‰éˆ•ç‹€æ…‹
            document.querySelectorAll('.scene-btn').forEach(b => b.classList.remove('active'));
            if(btn) btn.classList.add('active');
            
            // åˆ‡æ›é›»è·¯åœ–
            document.querySelectorAll('.circuit-scene').forEach(s => s.classList.remove('active'));
            document.getElementById('scene-' + mode).classList.add('active');
            
            // é‡ç½®èˆ‡æ›´æ–°ç‰©ç†ç‹€æ…‹
            updatePhysics(mode);
        }

        // 4. é»æ“Šäº’å‹• (å¼„å£ç‡ˆæ³¡ / é›»æ± æ²’é›»)
        function toggleState(element) {
            const scene = element.closest('.circuit-scene');
            
            if (element.classList.contains('bulb-wrapper')) {
                if (!element.classList.contains('is-broken')) {
                    const allBulbs = scene.querySelectorAll('.bulb-wrapper');
                    const brokenBulbs = scene.querySelectorAll('.bulb-wrapper.is-broken');
                    // é˜²æ­¢å…¨éƒ¨é—œæ‰
                    if (brokenBulbs.length + 1 >= allBulbs.length) return; 
                }
                element.classList.toggle('is-broken');
            } 
            else if (element.classList.contains('battery-group')) {
                element.classList.toggle('is-dead');
            }

            recalcCircuitState(scene);
        }

        // 5. é›»è·¯ç‹€æ…‹è¨ˆç®—
        function recalcCircuitState(scene) {
            const sceneId = scene.id;
            const bulbs = scene.querySelectorAll('.bulb-wrapper');
            const allBats = scene.querySelectorAll('.battery-group');
            const deadBats = scene.querySelectorAll('.battery-group.is-dead');
            
            // ç°¡å–®æ¨¡å‹ï¼šæ‰€æœ‰é›»æ± éƒ½æ²’é›»æ‰ç®—æ–·é›» (ä¸¦è¯æ¦‚å¿µ)
            const isPowerOff = (allBats.length > 0 && allBats.length === deadBats.length);

            bulbs.forEach(b => {
                b.classList.remove('lit-dim', 'lit-normal', 'lit-bright');
                if (!isPowerOff && !b.classList.contains('is-broken')) {
                    if (sceneId === 'scene-A') b.classList.add('lit-normal');
                    if (sceneId === 'scene-B') b.classList.add('lit-dim');
                    if (sceneId === 'scene-C') b.classList.add('lit-bright');
                    if (sceneId === 'scene-D') b.classList.add('lit-normal');
                }
            });
        }

        // 6. æ›´æ–°ç‰©ç†æ–‡å­—èˆ‡åˆå§‹ç‹€æ…‹ (è³‡æ–™åˆ†æµç‰ˆ)
function updatePhysics(mode) {
    // é‡ç½®æ‰€æœ‰å…ƒä»¶
    document.querySelectorAll('.bulb-wrapper').forEach(b => {
        b.classList.remove('lit-dim', 'lit-normal', 'lit-bright', 'is-broken');
    });
    document.querySelectorAll('.battery-group').forEach(bat => {
        bat.classList.remove('is-dead');
    });

    // å–å¾— DOM å…ƒç´ 
    const title = document.getElementById('infoTitle');
    const brightnessBadge = document.getElementById('infoBrightness');
    const text = document.getElementById('infoText');

    // ç¢ºä¿äº®åº¦æ¨™ç±¤é¡¯ç¤º
    brightnessBadge.style.display = "inline-block";

    // å®šç¾©è³‡æ–™ (åˆ†é›¢çµæ§‹ï¼šæ¨™é¡Œ / äº®åº¦ / è§£é‡‹)
    let data = {};

    if (mode === 'A') {
        document.getElementById('a-b1').classList.add('lit-normal');
        document.getElementById('a-b2').classList.add('lit-normal');
        
        data = {
            title: "ç‡ˆæ³¡ä¸²è¯ ï¼‹ é›»æ± ä¸²è¯",
            bright: "äº®åº¦ï¼šæ™®é€š",
            desc: "é›»æ± ä¸²è¯é›»åŠ›å¢å¼·ï¼Œä½†å…©å€‹ç‡ˆæ³¡ä¸²è¯å¹³åˆ†é›»å£“ï¼Œå› æ­¤äº®åº¦é©ä¸­ã€‚"
        };
    
    } else if (mode === 'B') {
        document.getElementById('b-b1').classList.add('lit-dim');
        document.getElementById('b-b2').classList.add('lit-dim');
        
        data = {
            title: "ç‡ˆæ³¡ä¸²è¯ ï¼‹ é›»æ± ä¸¦è¯",
            bright: "äº®åº¦ï¼šæœ€æš—",
            desc: "é›»æ± ä¸¦è¯é›»å£“ä¸è®Šï¼ˆé›»åŠ›å¼±ï¼‰ï¼Œä¸”å…©å€‹ç‡ˆæ³¡ä¸²è¯é‚„è¦å¹³åˆ†é›»å£“ï¼Œæ‰€ä»¥äº®åº¦æœ€æš—ã€‚"
        };
    
    } else if (mode === 'C') {
        document.getElementById('c-b1').classList.add('lit-bright');
        document.getElementById('c-b2').classList.add('lit-bright');
        
        data = {
            title: "ç‡ˆæ³¡ä¸¦è¯ ï¼‹ é›»æ± ä¸²è¯",
            bright: "äº®åº¦ï¼šæœ€äº®",
            desc: "é›»æ± ä¸²è¯è®“é›»å£“å€å¢ï¼Œä¸”ç‡ˆæ³¡ä¸¦è¯ä½¿æ¯å€‹ç‡ˆæ³¡éƒ½èƒ½ç¨äº«å¼·å¤§é›»å£“ï¼Œæ‰€ä»¥æœ€äº®ã€‚"
        };
    
    } else if (mode === 'D') {
        document.getElementById('d-b1').classList.add('lit-normal');
        document.getElementById('d-b2').classList.add('lit-normal');
        
        data = {
            title: "ç‡ˆæ³¡ä¸¦è¯ ï¼‹ é›»æ± ä¸¦è¯",
            bright: "äº®åº¦ï¼šæ™®é€š",
            desc: "é›»æ± ä¸¦è¯é›»å£“ä¸è®Šï¼Œç‡ˆæ³¡ä¸¦è¯å„è‡ªç¨äº«é›»å£“ã€‚æ•´é«”æƒ…æ³èˆ‡ã€Œ1é¡†é›»æ±  + 1é¡†ç‡ˆæ³¡ã€å®Œå…¨ç›¸åŒã€‚"
        };
    }

    // æ›´æ–°ç•«é¢
    title.innerText = data.title;
    brightnessBadge.innerText = data.bright;
    text.innerText = data.desc; // è‡ªå‹•é å·¦æ’ç‰ˆ
    
    // ä¾æ“šäº®åº¦æ”¹è®Š Badge é¡è‰² (è¦–è¦ºå¼·åŒ–)
    if(data.bright.includes("æœ€äº®")) brightnessBadge.style.backgroundColor = "#e74c3c"; // ç´…è‰²è­¦æˆ’
    else if(data.bright.includes("æœ€æš—")) brightnessBadge.style.backgroundColor = "#7f8c8d"; // ç°è‰²é»¯æ·¡
    else brightnessBadge.style.backgroundColor = "#f39c12"; // æ©˜è‰²æ™®é€š
}
    </script>
</body>
</html>